<?xml version="1.0" encoding="UTF-8"?><fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" font-family="Times,Symbol,ZapfDingbats" font-size="10pt" text-align="left" line-height="normal" font-selection-strategy="character-by-character" line-height-shift-adjustment="disregard-shifts" writing-mode="lr-tb" language="en"><fo:layout-master-set><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="blank" margin-left="0.5in" margin-right="0.5in"><fo:region-body margin-top="0.5in" margin-bottom="0.5in" display-align="center"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-blank"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-blank"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="titlepage-first" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-first"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-first"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="titlepage-odd" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-odd"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-odd"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="titlepage-even" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-even"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-even"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="lot-first" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-first"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-first"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="lot-odd" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-odd"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-odd"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="lot-even" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-even"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-even"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="front-first" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-first"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-first"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="front-odd" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-odd"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-odd"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="front-even" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-even"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-even"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="body-first" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-first"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-first"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="body-odd" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-odd"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-odd"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="body-even" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-even"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-even"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="back-first" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-first"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-first"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="back-odd" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-odd"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-odd"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="back-even" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="1" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-even"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-even"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="index-first" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="2" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-first"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-first"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="index-odd" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="2" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-odd"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-odd"/></fo:simple-page-master><fo:simple-page-master margin-bottom="0.5in" margin-top="0.5in" page-height="11in" page-width="8.5in" master-name="index-even" margin-left="0.5in" margin-right="0.5in"><fo:region-body column-count="2" column-gap="12pt" margin-top="0.5in" margin-bottom="0.5in"/><fo:region-before display-align="before" extent="0.4in" region-name="xsl-region-before-even"/><fo:region-after display-align="after" extent="0.4in" region-name="xsl-region-after-even"/></fo:simple-page-master><fo:page-sequence-master master-name="titlepage"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference blank-or-not-blank="blank" master-reference="blank"/><fo:conditional-page-master-reference page-position="first" master-reference="titlepage-first"/><fo:conditional-page-master-reference odd-or-even="odd" master-reference="titlepage-odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="titlepage-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="lot"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference blank-or-not-blank="blank" master-reference="blank"/><fo:conditional-page-master-reference page-position="first" master-reference="lot-first"/><fo:conditional-page-master-reference odd-or-even="odd" master-reference="lot-odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="lot-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="front"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference blank-or-not-blank="blank" master-reference="blank"/><fo:conditional-page-master-reference page-position="first" master-reference="front-first"/><fo:conditional-page-master-reference odd-or-even="odd" master-reference="front-odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="front-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="body"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference blank-or-not-blank="blank" master-reference="blank"/><fo:conditional-page-master-reference page-position="first" master-reference="body-first"/><fo:conditional-page-master-reference odd-or-even="odd" master-reference="body-odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="body-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="back"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference blank-or-not-blank="blank" master-reference="blank"/><fo:conditional-page-master-reference page-position="first" master-reference="back-first"/><fo:conditional-page-master-reference odd-or-even="odd" master-reference="back-odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="back-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="index"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference blank-or-not-blank="blank" master-reference="blank"/><fo:conditional-page-master-reference page-position="first" master-reference="index-first"/><fo:conditional-page-master-reference odd-or-even="odd" master-reference="index-odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="index-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master></fo:layout-master-set><fo:declarations xmlns:fox="http://xmlgraphics.apache.org/fop/extensions"><x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description xmlns:dc="http://purl.org/dc/elements/1.1/" rdf:about=""><dc:title>CouchDB Release 1.1 Feature Guide</dc:title></rdf:Description><rdf:Description xmlns:pdf="http://ns.adobe.com/pdf/1.3/" rdf:about=""/><rdf:Description xmlns:xmp="http://ns.adobe.com/xap/1.0/" rdf:about=""><xmp:CreatorTool>DocBook XSL Stylesheets with Apache FOP</xmp:CreatorTool></rdf:Description></rdf:RDF></x:xmpmeta></fo:declarations><fo:bookmark-tree><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1" starting-state="hide"><fo:bookmark-title>CouchDB Release 1.1 Feature Guide</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="toc...couchdb-release-1.1"><fo:bookmark-title>Table of Contents</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-upgrading" starting-state="hide"><fo:bookmark-title>1. Upgrading to CouchDB 1.1</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchb-release-1.1-replicatordb" starting-state="hide"><fo:bookmark-title>2. Replicator Database</fo:bookmark-title><fo:bookmark internal-destination="couchdb-release-1.1-replicatordb-basics" starting-state="hide"><fo:bookmark-title>2.1. Basics</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="couchdb-release-1.1-replicatordb-docsame" starting-state="hide"><fo:bookmark-title>2.2. Documents describing the same replication</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="couchdb-release-1.1-replicatordb-cancel" starting-state="hide"><fo:bookmark-title>2.3. Canceling replications</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="couchdb-release-1.1-replicatordb-restart" starting-state="hide"><fo:bookmark-title>2.4. Server restart</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="couchdb-release-1.1-replicatordb-changing" starting-state="hide"><fo:bookmark-title>2.5. Changing the Replicator Database</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="couchdb-release-1.1-replicatordb-replicating" starting-state="hide"><fo:bookmark-title>2.6. Replicating the replicator database</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="couchdb-release-1.1-replicatordb-delegations" starting-state="hide"><fo:bookmark-title>2.7. Delegations</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-ssl" starting-state="hide"><fo:bookmark-title>3. Native SSL Support</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-httprange" starting-state="hide"><fo:bookmark-title>4. HTTP Range Requests</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-proxying" starting-state="hide"><fo:bookmark-title>5. HTTP Proxying</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-commonjs" starting-state="hide"><fo:bookmark-title>6. Added CommonJS support to map functions</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-etag" starting-state="hide"><fo:bookmark-title>7. More granular ETag support for views</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-filters" starting-state="hide"><fo:bookmark-title>8. Added built-in filters for _changes: _doc_ids and _design.</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-wildcards" starting-state="hide"><fo:bookmark-title>9. Allow wildcards in vhosts definitions</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-osprocess" starting-state="hide"><fo:bookmark-title>10. OS Daemons</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="coudhdb-release-1.1-updateafter" starting-state="hide"><fo:bookmark-title>11. Stale views and update_after</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-socketoptions" starting-state="hide"><fo:bookmark-title>12. Socket Options Configuration Setting</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-serveroptions" starting-state="hide"><fo:bookmark-title>13. Server Options Configuration Setting</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-errormessages" starting-state="hide"><fo:bookmark-title>14. Improved Error Messages</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-microoptimizations" starting-state="hide"><fo:bookmark-title>15. Multiple micro-optimizations when reading data.</fo:bookmark-title></fo:bookmark></fo:bookmark-tree><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-upgrading"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchb-release-1.1-replicatordb"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-replicatordb-basics"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-replicatordb-docsame"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-replicatordb-cancel"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-replicatordb-restart"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-replicatordb-changing"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-replicatordb-replicating"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-replicatordb-delegations"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-ssl"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-httprange"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-proxying"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-commonjs"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-etag"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-filters"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-wildcards"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-osprocess"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="coudhdb-release-1.1-updateafter"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-socketoptions"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-serveroptions"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-errormessages"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="couchdb-release-1.1-microoptimizations"/><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" master-reference="body" hyphenate="true" language="en" format="1" initial-page-number="1" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Times,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell display-align="before" text-align="start" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell display-align="before" text-align="center" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell display-align="before" text-align="right" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Times,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell display-align="before" text-align="start" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell display-align="before" text-align="center" relative-align="baseline"><fo:block><fo:block>CouchDB Release 1.1 Feature Guide</fo:block></fo:block></fo:table-cell><fo:table-cell display-align="before" text-align="right" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Times,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell display-align="before" text-align="start" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell display-align="before" text-align="center" relative-align="baseline"><fo:block><fo:block>CouchDB Release 1.1 Feature Guide</fo:block></fo:block></fo:table-cell><fo:table-cell display-align="before" text-align="right" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Times,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell display-align="before" text-align="start" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell display-align="before" text-align="center" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell display-align="before" text-align="right" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Times,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell display-align="after" text-align="start" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell display-align="after" text-align="center" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell display-align="after" text-align="end" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Times,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell display-align="after" text-align="start" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell display-align="after" text-align="center" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell display-align="after" text-align="end" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Times,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell display-align="after" text-align="start" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell display-align="after" text-align="center" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell display-align="after" text-align="end" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Times,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell display-align="after" text-align="start" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell display-align="after" text-align="center" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell display-align="after" text-align="end" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="couchdb-release-1.1"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block text-align="center" start-indent="0pt"><fo:block font-weight="bold" font-size="24.8832pt" keep-with-next.within-column="always"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="center" start-indent="0pt" font-size="18pt" font-weight="normal" color="#a30a0a" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">CouchDB Release 1.1 Feature Guide</fo:block></fo:block><fo:block font-family="Times,Symbol,ZapfDingbats" margin-right="0.5in" margin-left="0.5in" text-align="start" space-before="0.5em"><fo:block start-indent="0.0in" end-indent="0.0in"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="center">Abstract</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        This document provides details on the new features introduced in
        the CouchDB 1.1 release from the CouchDB 1.0.x release series.
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
  <fo:inline font-style="italic">Last document update</fo:inline>: 25 Jan 2012 14:44;
  <fo:inline font-style="italic">Document built</fo:inline>: 21 Feb 2012 20:8.
</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...couchdb-release-1.1"><fo:block><fo:block><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" font-size="17.28pt" start-indent="0pt" margin-left="0pt" space-after="0.5em" space-before.maximum="2em" space-before.optimum="1.5em" space-before.minimum="1em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-upgrading">1. Upgrading to CouchDB 1.1</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-upgrading"><fo:page-number-citation ref-id="couchdb-release-1.1-upgrading"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchb-release-1.1-replicatordb">2. Replicator Database</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchb-release-1.1-replicatordb"><fo:page-number-citation ref-id="couchb-release-1.1-replicatordb"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.couchdb-release-1.1.couchb-release-1.1-replicatordb" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-basics">2.1. Basics</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-basics"><fo:page-number-citation ref-id="couchdb-release-1.1-replicatordb-basics"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-docsame">2.2. Documents describing the same replication</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-docsame"><fo:page-number-citation ref-id="couchdb-release-1.1-replicatordb-docsame"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-cancel">2.3. Canceling replications</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-cancel"><fo:page-number-citation ref-id="couchdb-release-1.1-replicatordb-cancel"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-restart">2.4. Server restart</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-restart"><fo:page-number-citation ref-id="couchdb-release-1.1-replicatordb-restart"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-changing">2.5. Changing the Replicator Database</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-changing"><fo:page-number-citation ref-id="couchdb-release-1.1-replicatordb-changing"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-replicating">2.6. Replicating the replicator database</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-replicating"><fo:page-number-citation ref-id="couchdb-release-1.1-replicatordb-replicating"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-delegations">2.7. Delegations</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-replicatordb-delegations"><fo:page-number-citation ref-id="couchdb-release-1.1-replicatordb-delegations"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-ssl">3. Native SSL Support</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-ssl"><fo:page-number-citation ref-id="couchdb-release-1.1-ssl"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-httprange">4. HTTP Range Requests</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-httprange"><fo:page-number-citation ref-id="couchdb-release-1.1-httprange"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-proxying">5. HTTP Proxying</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-proxying"><fo:page-number-citation ref-id="couchdb-release-1.1-proxying"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-commonjs">6. Added CommonJS support to map functions</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-commonjs"><fo:page-number-citation ref-id="couchdb-release-1.1-commonjs"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-etag">7. More granular ETag support for views</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-etag"><fo:page-number-citation ref-id="couchdb-release-1.1-etag"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-filters">8. Added built-in filters for <fo:inline font-family="Courier" color="#026789">_changes</fo:inline>:
      <fo:inline font-family="Courier" color="#026789">_doc_ids</fo:inline> and <fo:inline font-family="Courier" color="#026789">_design</fo:inline>.</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-filters"><fo:page-number-citation ref-id="couchdb-release-1.1-filters"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-wildcards">9. Allow wildcards in vhosts definitions</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-wildcards"><fo:page-number-citation ref-id="couchdb-release-1.1-wildcards"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-osprocess">10. OS Daemons</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-osprocess"><fo:page-number-citation ref-id="couchdb-release-1.1-osprocess"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="coudhdb-release-1.1-updateafter">11. Stale views and <fo:inline font-family="Courier" color="#026789">update_after</fo:inline></fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="coudhdb-release-1.1-updateafter"><fo:page-number-citation ref-id="coudhdb-release-1.1-updateafter"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-socketoptions">12. Socket Options Configuration Setting</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-socketoptions"><fo:page-number-citation ref-id="couchdb-release-1.1-socketoptions"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-serveroptions">13. Server Options Configuration Setting</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-serveroptions"><fo:page-number-citation ref-id="couchdb-release-1.1-serveroptions"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-errormessages">14. Improved Error Messages</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-errormessages"><fo:page-number-citation ref-id="couchdb-release-1.1-errormessages"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="couchdb-release-1.1-microoptimizations">15. Multiple micro-optimizations when reading data.</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader keep-with-next.within-line="always" leader-alignment="reference-area" leader-pattern-width="3pt" leader-pattern="dots"/> <fo:basic-link internal-destination="couchdb-release-1.1-microoptimizations"><fo:page-number-citation ref-id="couchdb-release-1.1-microoptimizations"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block id="couchdb-release-1.1-upgrading"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Upgrading to CouchDB 1.1</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">1. Upgrading to CouchDB 1.1</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      You can upgrade your existing CouchDB 1.0.x installation to
      CouchDB 1.1 without any specific steps or migration. When you run
      CouchDB 1.1 the existing data and index files will be opened and
      used as normal.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The first time you run a compaction routine on your database
      within CouchDB 1.1, the data structure and indexes will be updated
      to the new version of the CouchDB database format that can only be
      read by CouchDB 1.1 and later. This step is not reversable. Once
      the data files have been updated and migrated to the new version
      the data files will no longer work with a CouchDB 1.0.x release.
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in" id="N1001D"><fo:block font-size="10pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" color="#a30a0a" font-family="Helvetica" margin-left="0.25in" margin-right="0.25in" padding-left="0.1in">Warning</fo:block><fo:block space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" margin-left="0.25in" margin-right="0.25in" border-left="5px solid black" padding-left="0.1in"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        If you want to retain support for openein gthe data files in
        CouchDB 1.0.x you must back up your data files before performing
        the upgrade and compaction process.
      </fo:block></fo:block></fo:block></fo:block><fo:block id="couchb-release-1.1-replicatordb"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Replicator Database</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">2. Replicator Database</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      A database where you
      <fo:inline font-family="Courier" color="#026789">PUT</fo:inline>/<fo:inline font-family="Courier" color="#026789">POST</fo:inline> documents to
      trigger replications and you <fo:inline font-family="Courier" color="#026789">DELETE</fo:inline> to cancel
      ongoing replications. These documents have exactly the same
      content as the JSON objects we used to <fo:inline font-family="Courier" color="#026789">POST</fo:inline> to
      <fo:inline font-family="Courier" color="#026789">_replicate</fo:inline> (fields <fo:inline font-family="Courier" color="#026789">source</fo:inline>,
      <fo:inline font-family="Courier" color="#026789">target</fo:inline>, <fo:inline font-family="Courier" color="#026789">create_target</fo:inline>,
      <fo:inline font-family="Courier" color="#026789">continuous</fo:inline>, <fo:inline font-family="Courier" color="#026789">doc_ids</fo:inline>,
      <fo:inline font-family="Courier" color="#026789">filter</fo:inline>, <fo:inline font-family="Courier" color="#026789">query_params</fo:inline>.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Replication documents can have a user defined
      <fo:inline font-family="Courier" color="#026789">_id</fo:inline>. Design documents (and
      <fo:inline font-family="Courier" color="#026789">_local</fo:inline> documents) added to the replicator
      database are ignored.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The default name of this database is
      <fo:inline font-family="Courier" color="#026789">_replicator</fo:inline>. The name can be changed in the
      <fo:inline font-family="Courier" color="#026789">local.ini</fo:inline> configuration, section
      <fo:inline font-family="Courier" color="#026789">[replicator]</fo:inline>, parameter <fo:inline font-family="Courier" color="#026789">db</fo:inline>.
    </fo:block><fo:block id="couchdb-release-1.1-replicatordb-basics"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Basics</fo:marker><fo:block font-size="14pt" font-weight="bold" color="#a30a0a">2.1. Basics</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Let's say you PUT the following document into _replicator:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10066">{
    "_id": "my_rep",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar",
    "create_target":  true
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        In the couch log you'll see 2 entries like these:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N1006A">[Thu, 17 Feb 2011 19:43:59 GMT] [info] [&lt;0.291.0&gt;] Document `my_rep` triggered replication `c0ebe9256695ff083347cbf95f93e280+create_target`
[Thu, 17 Feb 2011 19:44:37 GMT] [info] [&lt;0.124.0&gt;] Replication `c0ebe9256695ff083347cbf95f93e280+create_target` finished (triggered by document `my_rep`)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        As soon as the replication is triggered, the document will be
        updated by CouchDB with 3 new fields:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N1006E">{
    "_id": "my_rep",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar",
    "create_target":  true,
    "_replication_id":  "c0ebe9256695ff083347cbf95f93e280",
    "_replication_state":  "triggered",
    "_replication_state_time":  1297974122
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Special fields set by the replicator start with the prefix
        <fo:inline font-family="Courier" color="#026789">_replication_</fo:inline>.
      </fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="N10075"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="N10076"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
            <fo:inline font-family="Courier" color="#026789">_replication_id</fo:inline>
          </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
            The ID internally assigned to the replication. This is also
            the ID exposed by <fo:inline font-family="Courier" color="#026789">/_active_tasks</fo:inline>.
          </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="N10081"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
            <fo:inline font-family="Courier" color="#026789">_replication_state</fo:inline>
          </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
            The current state of the replication.
          </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="N10089"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
            <fo:inline font-family="Courier" color="#026789">_replication_state_time</fo:inline>
          </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
            A Unix timestamp (number of seconds since 1 Jan 1970) that
            tells us when the current replication state (marked in
            <fo:inline font-family="Courier" color="#026789">_replication_state</fo:inline>) was set.
          </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        When the replication finishes, it will update the
        <fo:inline font-family="Courier" color="#026789">_replication_state</fo:inline> field (and
        <fo:inline font-family="Courier" color="#026789">_replication_state_time</fo:inline>) with the value
        <fo:inline font-family="Courier" color="#026789">completed</fo:inline>, so the document will look like:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N1009F">{
    "_id": "my_rep",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar",
    "create_target":  true,
    "_replication_id":  "c0ebe9256695ff083347cbf95f93e280",
    "_replication_state":  "completed",
    "_replication_state_time":  1297974122
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        When an error happens during replication, the
        <fo:inline font-family="Courier" color="#026789">_replication_state</fo:inline> field is set to
        <fo:inline font-family="Courier" color="#026789">error</fo:inline> (and
        <fo:inline font-family="Courier" color="#026789">_replication_state</fo:inline> gets updated of course).
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        When you PUT/POST a document to the
        <fo:inline font-family="Courier" color="#026789">_replicator</fo:inline> database, CouchDB will attempt to
        start the replication up to 10 times (configurable under
        <fo:inline font-family="Courier" color="#026789">[replicator]</fo:inline>, parameter
        <fo:inline font-family="Courier" color="#026789">max_replication_retry_count</fo:inline>). If it fails on
        the first attempt, it waits 5 seconds before doing a second
        attempt. If the second attempt fails, it waits 10 seconds before
        doing a third attempt. If the third attempt fails, it waits 20
        seconds before doing a fourth attempt (each attempt doubles the
        previous wait period). When an attempt fails, the Couch log will
        show you something like:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N100B7">[error] [&lt;0.149.0&gt;] Error starting replication `67c1bb92010e7abe35d7d629635f18b6+create_target` (document `my_rep_2`): {db_not_found,&lt;&lt;"could not open http://myserver:5986/foo/"&gt;&gt;</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in" id="N100B9"><fo:block font-size="10pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" color="#a30a0a" font-family="Helvetica" margin-left="0.25in" margin-right="0.25in" padding-left="0.1in">Note</fo:block><fo:block space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" margin-left="0.25in" margin-right="0.25in" border-left="5px solid black" padding-left="0.1in"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          The <fo:inline font-family="Courier" color="#026789">_replication_state</fo:inline> field is only set to
          <fo:inline font-family="Courier" color="#026789">error</fo:inline> when all the attempts were
          unsuccessful.
        </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        There are only 3 possible values for the
        <fo:inline font-family="Courier" color="#026789">_replication_state</fo:inline> field:
        <fo:inline font-family="Courier" color="#026789">triggered</fo:inline>, <fo:inline font-family="Courier" color="#026789">completed</fo:inline> and
        <fo:inline font-family="Courier" color="#026789">error</fo:inline>. Continuous replications never get
        their state set to <fo:inline font-family="Courier" color="#026789">completed</fo:inline>.
      </fo:block></fo:block><fo:block id="couchdb-release-1.1-replicatordb-docsame"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Documents describing the same replication</fo:marker><fo:block font-size="14pt" font-weight="bold" color="#a30a0a">2.2. Documents describing the same replication</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Lets suppose 2 documents are added to the
        <fo:inline font-family="Courier" color="#026789">_replicator</fo:inline> database in the following order:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N100DC">{
    "_id": "doc_A",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar"
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        and
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N100E0">{
    "_id": "doc_B",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar"
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Both describe exactly the same replication (only their
        <fo:inline font-family="Courier" color="#026789">_ids</fo:inline> differ). In this case document
        <fo:inline font-family="Courier" color="#026789">doc_A</fo:inline> triggers the replication, getting
        updated by CouchDB with the fields
        <fo:inline font-family="Courier" color="#026789">_replication_state</fo:inline>,
        <fo:inline font-family="Courier" color="#026789">_replication_state_time</fo:inline> and
        <fo:inline font-family="Courier" color="#026789">_replication_id</fo:inline>, just like it was described
        before. Document <fo:inline font-family="Courier" color="#026789">doc_B</fo:inline> however, is only
        updated with one field, the <fo:inline font-family="Courier" color="#026789">_replication_id</fo:inline>
        so it will look like this:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N100F9">{
    "_id": "doc_B",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar",
    "_replication_id":  "c0ebe9256695ff083347cbf95f93e280"
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        While document <fo:inline font-family="Courier" color="#026789">doc_A</fo:inline> will look like this:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10100">{
    "_id": "doc_A",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar",
    "_replication_id":  "c0ebe9256695ff083347cbf95f93e280",
    "_replication_state":  "triggered",
    "_replication_state_time":  1297974122
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Note that both document get exactly the same value for the
        <fo:inline font-family="Courier" color="#026789">_replication_id</fo:inline> field. This way you can
        identify which documents refer to the same replication - you can
        for example define a view which maps replication IDs to document
        IDs.
      </fo:block></fo:block><fo:block id="couchdb-release-1.1-replicatordb-cancel"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Canceling replications</fo:marker><fo:block font-size="14pt" font-weight="bold" color="#a30a0a">2.3. Canceling replications</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        To cancel a replication simply <fo:inline font-family="Courier" color="#026789">DELETE</fo:inline> the
        document which triggered the replication. The Couch log will
        show you an entry like the following:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10110">[Thu, 17 Feb 2011 20:16:29 GMT] [info] [&lt;0.125.0&gt;] Stopped replication `c0ebe9256695ff083347cbf95f93e280+continuous+create_target` because replication document `doc_A` was deleted</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in" id="N10112"><fo:block font-size="10pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" color="#a30a0a" font-family="Helvetica" margin-left="0.25in" margin-right="0.25in" padding-left="0.1in">Note</fo:block><fo:block space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" margin-left="0.25in" margin-right="0.25in" border-left="5px solid black" padding-left="0.1in"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          You need to <fo:inline font-family="Courier" color="#026789">DELETE</fo:inline> the document that
          triggered the replication. <fo:inline font-family="Courier" color="#026789">DELETE</fo:inline>ing
          another document that describes the same replication but did
          not trigger it, will not cancel the replication.
        </fo:block></fo:block></fo:block></fo:block><fo:block id="couchdb-release-1.1-replicatordb-restart"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Server restart</fo:marker><fo:block font-size="14pt" font-weight="bold" color="#a30a0a">2.4. Server restart</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        When CouchDB is restarted, it checks its
        <fo:inline font-family="Courier" color="#026789">_replicator</fo:inline> database and restarts any
        replication that is described by a document that either has its
        <fo:inline font-family="Courier" color="#026789">_replication_state</fo:inline> field set to
        <fo:inline font-family="Courier" color="#026789">triggered</fo:inline> or it doesn't have yet the
        <fo:inline font-family="Courier" color="#026789">_replication_state</fo:inline> field set.
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in" id="N1012D"><fo:block font-size="10pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" color="#a30a0a" font-family="Helvetica" margin-left="0.25in" margin-right="0.25in" padding-left="0.1in">Note</fo:block><fo:block space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" margin-left="0.25in" margin-right="0.25in" border-left="5px solid black" padding-left="0.1in"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          Continuous replications always have a
          <fo:inline font-family="Courier" color="#026789">_replication_state</fo:inline> field with the value
          <fo:inline font-family="Courier" color="#026789">triggered</fo:inline>, therefore they're always
          restarted when CouchDB is restarted.
        </fo:block></fo:block></fo:block></fo:block><fo:block id="couchdb-release-1.1-replicatordb-changing"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Changing the Replicator Database</fo:marker><fo:block font-size="14pt" font-weight="bold" color="#a30a0a">2.5. Changing the Replicator Database</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Imagine your replicator database (default name is _replicator)
        has the two following documents that represent pull replications
        from servers A and B:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N1013C">{
    "_id": "rep_from_A",
    "source":  "http://aserver.com:5984/foo",
    "target":  "foo_a",
    "continuous":  true,
    "_replication_id":  "c0ebe9256695ff083347cbf95f93e280",
    "_replication_state":  "triggered",
    "_replication_state_time":  1297971311
}
{
    "_id": "rep_from_B",
    "source":  "http://bserver.com:5984/foo",
    "target":  "foo_b",
    "continuous":  true,
    "_replication_id":  "231bb3cf9d48314eaa8d48a9170570d1",
    "_replication_state":  "triggered",
    "_replication_state_time":  1297974122
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Now without stopping and restarting CouchDB, you change the name
        of the replicator database to
        <fo:inline font-family="Courier" color="#026789">another_replicator_db</fo:inline>:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10143">$ curl -X PUT http://localhost:5984/_config/replicator/db -d '"another_replicator_db"'
"_replicator"</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        As soon as this is done, both pull replications defined before,
        are stopped. This is explicitly mentioned in CouchDB's log:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10147">[Fri, 11 Mar 2011 07:44:20 GMT] [info] [&lt;0.104.0&gt;] Stopping all ongoing replications because the replicator database was deleted or changed
[Fri, 11 Mar 2011 07:44:20 GMT] [info] [&lt;0.127.0&gt;] 127.0.0.1 - - PUT /_config/replicator/db 200</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Imagine now you add a replication document to the new replicator
        database named <fo:inline font-family="Courier" color="#026789">another_replicator_db</fo:inline>:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N1014E">{
    "_id": "rep_from_X",
    "source":  "http://xserver.com:5984/foo",
    "target":  "foo_x",
    "continuous":  true
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        From now own you have a single replication going on in your
        system: a pull replication pulling from server X. Now you change
        back the replicator database to the original one
        <fo:inline font-family="Courier" color="#026789">_replicator</fo:inline>:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10155">$ curl -X PUT http://localhost:5984/_config/replicator/db -d '"_replicator"'
"another_replicator_db"</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Immediately after this operation, the replication pulling from
        server X will be stopped and the replications defined in the
        _replicator database (pulling from servers A and B) will be
        resumed.
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Changing again the replicator database to
        <fo:inline font-family="Courier" color="#026789">another_replicator_db</fo:inline> will stop the pull
        replications pulling from servers A and B, and resume the pull
        replication pulling from server X.
      </fo:block></fo:block><fo:block id="couchdb-release-1.1-replicatordb-replicating"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Replicating the replicator database</fo:marker><fo:block font-size="14pt" font-weight="bold" color="#a30a0a">2.6. Replicating the replicator database</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Imagine you have in server C a replicator database with the two
        following pull replication documents in it:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10164">{
     "_id": "rep_from_A",
     "source":  "http://aserver.com:5984/foo",
     "target":  "foo_a",
     "continuous":  true,
     "_replication_id":  "c0ebe9256695ff083347cbf95f93e280",
     "_replication_state":  "triggered",
     "_replication_state_time":  1297971311
}
{
     "_id": "rep_from_B",
     "source":  "http://bserver.com:5984/foo",
     "target":  "foo_b",
     "continuous":  true,
     "_replication_id":  "231bb3cf9d48314eaa8d48a9170570d1",
     "_replication_state":  "triggered",
     "_replication_state_time":  1297974122
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Now you would like to have the same pull replications going on
        in server D, that is, you would like to have server D pull
        replicating from servers A and B. You have two options:
      </fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="N10168"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="N10169"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
            Explicitly add two documents to server's D replicator
            database
          </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="N1016C"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
            Replicate server's C replicator database into server's D
            replicator database
          </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Both alternatives accomplish exactly the same goal.
      </fo:block></fo:block><fo:block id="couchdb-release-1.1-replicatordb-delegations"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Delegations</fo:marker><fo:block font-size="14pt" font-weight="bold" color="#a30a0a">2.7. Delegations</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Replication documents can have a custom
        <fo:inline font-family="Courier" color="#026789">user_ctx</fo:inline> property. This property defines the
        user context under which a replication runs. For the old way of
        triggering replications (POSTing to
        <fo:inline font-family="Courier" color="#026789">/_replicate/</fo:inline>), this property was not needed
        (it didn't exist in fact) - this is because at the moment of
        triggering the replication it has information about the
        authenticated user. With the replicator database, since it's a
        regular database, the information about the authenticated user
        is only present at the moment the replication document is
        written to the database - the replicator database implementation
        is like a _changes feed consumer (with
        <fo:inline font-family="Courier" color="#026789">?include_docs=true</fo:inline>) that reacts to what was
        written to the replicator database - in fact this feature could
        be implemented with an external script/program. This
        implementation detail implies that for non admin users, a
        <fo:inline font-family="Courier" color="#026789">user_ctx</fo:inline> property, containing the user's name
        and a subset of his/her roles, must be defined in the
        replication document. This is ensured by the document update
        validation function present in the default design document of
        the replicator database. This validation function also ensure
        that a non admin user can set a user name property in the
        <fo:inline font-family="Courier" color="#026789">user_ctx</fo:inline> property that doesn't match his/her
        own name (same principle applies for the roles).
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        For admins, the <fo:inline font-family="Courier" color="#026789">user_ctx</fo:inline> property is
        optional, and if it's missing it defaults to a user context with
        name null and an empty list of roles - this mean design
        documents will not be written to local targets. If writing
        design documents to local targets is desired, the a user context
        with the roles <fo:inline font-family="Courier" color="#026789">_admin</fo:inline> must be set explicitly.
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Also, for admins the <fo:inline font-family="Courier" color="#026789">user_ctx</fo:inline> property can be
        used to trigger a replication on behalf of another user. This is
        the user context that will be passed to local target database
        document validation functions.
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in" id="N10193"><fo:block font-size="10pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" color="#a30a0a" font-family="Helvetica" margin-left="0.25in" margin-right="0.25in" padding-left="0.1in">Note</fo:block><fo:block space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" margin-left="0.25in" margin-right="0.25in" border-left="5px solid black" padding-left="0.1in"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          The <fo:inline font-family="Courier" color="#026789">user_ctx</fo:inline> property only has effect for
          local endpoints.
        </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Example delegated replication document:
      </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N1019B">{
     "_id": "my_rep",
     "source":  "http://bserver.com:5984/foo",
     "target":  "bar",
     "continuous":  true,
     "user_ctx": {
          "name": "joe",
          "roles": ["erlanger", "researcher"]
     }
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        As stated before, for admins the user_ctx property is optional,
        while for regular (non admin) users it's mandatory. When the
        roles property of <fo:inline font-family="Courier" color="#026789">user_ctx</fo:inline> is missing, it
        defaults to the empty list <fo:inline font-family="Courier" color="#026789">[ ]</fo:inline>.
      </fo:block></fo:block></fo:block><fo:block id="couchdb-release-1.1-ssl"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Native SSL Support</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">3. Native SSL Support</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      CouchDB 1.1 supports SSL natively. All your secure connection
      needs can now be served without the need set and maintain a
      separate proxy server that handles SSL.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      SSL setup can be tricky, but the configuration in CouchDB was
      designed to be as easy as possible. All you need is two files; a
      certificate and a private key. If you bought an official SSL
      certificate from a certificate authority, both should be in your
      possession already.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      If you just want to try this out and don't want to pay anything
      upfront, you can create a self-signed certificate. Everything will
      work the same, but clients will get a warning about an insecure
      certificate.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      You will need the OpenSSL command line tool installed. It probably
      already is.
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N101B1">shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">mkdir cert &amp;&amp; cd cert</fo:inline>
shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">openssl genrsa &gt; privkey.pem</fo:inline>
shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">openssl req -new -x509 -key privkey.pem -out mycert.pem -days 1095</fo:inline>
shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">ls</fo:inline>
mycert.pem privkey.pem</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Now, you need to edit CouchDB's configuration, either by editing
      your <fo:inline font-family="Courier" color="#026789">local.ini</fo:inline> file or using the
      <fo:inline font-family="Courier" color="#026789">/_config</fo:inline> API calls or the configuration screen
      in Futon. Here is what you need to do in
      <fo:inline font-family="Courier" color="#026789">local.ini</fo:inline>, you can infer what needs doing in
      the other places.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Be sure to make these edits. Under <fo:inline font-family="Courier" color="#026789">[daemons]</fo:inline>
      you should see:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N101CF">; enable SSL support by uncommenting the following line and supply the PEM's below.
; the default ssl port CouchDB listens on is 6984
;httpsd = {couch_httpd, start_link, [https]}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Here uncomment the last line:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N101D3">httpsd = {couch_httpd, start_link, [https]}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Next, under <fo:inline font-family="Courier" color="#026789">[ssl]</fo:inline> you will see:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N101DA">;cert_file = /full/path/to/server_cert.pem
;key_file = /full/path/to/server_key.pem</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Uncomment and adjust the paths so it matches your system's paths:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N101DE">cert_file = /home/jan/cert/mycert.pem
key_file = /home/jan/cert/privkey.pem</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      For more information please read
      <fo:basic-link color="#0A72A3" external-destination="url(http://www.openssl.org/docs/HOWTO/certificates.txt)">http://www.openssl.org/docs/HOWTO/certificates.txt</fo:basic-link>.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Now start (or restart) CouchDB. You should be able to connect to
      it using HTTPS on port 6984:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N101E8">shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">curl https://127.0.0.1:6984/</fo:inline>
curl: (60) SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed
More details here: http://curl.haxx.se/docs/sslcerts.html

curl performs SSL certificate verification by default, using a "bundle"
of Certificate Authority (CA) public keys (CA certs). If the default
bundle file isn't adequate, you can specify an alternate file
using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in
the bundle, the certificate verification probably failed due to a
problem with the certificate (it might be expired, or the name might
not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use
the -k (or --insecure) option.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Oh no what happened?! — Remember, clients will notify their
      users that your certificate is self signed.
      <fo:inline font-weight="bold">curl</fo:inline> is the client in this case and it notifies
      you. Luckily you trust yourself (don't you?) and you can specify
      the <fo:inline font-family="Courier" color="#026789">-k</fo:inline> option as the message reads:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N101F5">shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">curl -k https://127.0.0.1:6984/</fo:inline>
{"couchdb":"Welcome","version":"1.1.0"}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      All done.
    </fo:block></fo:block><fo:block id="couchdb-release-1.1-httprange"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">HTTP Range Requests</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">4. HTTP Range Requests</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      HTTP allows you to specify byte ranges for requests. This allows
      the implementation of resumable downloads and skippable audio and
      video streams alike. Now this is available for all attachments
      inside CouchDB.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      This is just a real quick run through how this looks under the
      hood. Usually, you will have larger binary files to serve from
      CouchDB, like MP3s and videos, but to make things a little more
      obvious, I use a text file here (Note that I use the
      <fo:inline font-family="Courier" color="#026789">application/octet-stream</fo:inline> Content-Type instead
      of <fo:inline font-family="Courier" color="#026789">text/plain</fo:inline>).
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N1020A">shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">cat file.txt </fo:inline>
My hovercraft is full of eels!</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Now lets store this text file as an attachment in CouchDB. First,
      we create a database:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10211">shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">curl -X PUT http://127.0.0.1:5984/test</fo:inline>
{"ok":true}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Then we create a new document and the file attachment in one go:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10218">shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">curl -X PUT http://127.0.0.1:5984/test/doc/file.txt -H "Content-Type: application/octet-stream" -d@file.txt</fo:inline>
{"ok":true,"id":"doc","rev":"1-287a28fa680ae0c7fb4729bf0c6e0cf2"}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Now we can request the whole file easily:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N1021F">shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">curl -X GET http://127.0.0.1:5984/test/doc/file.txt</fo:inline>
My hovercraft is full of eels!</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      But say we only want the first 13 bytes:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10226">shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">curl -X GET http://127.0.0.1:5984/test/doc/file.txt -H "Range: bytes=0-12"</fo:inline>
My hovercraft</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      HTTP supports many ways to specify single and even multiple byte
      rangers. Read all about it in
      <fo:basic-link color="#0A72A3" external-destination="url(http://tools.ietf.org/html/rfc2616#section-14.27)">RFC
      2616</fo:basic-link>.
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in" id="N10231"><fo:block font-size="10pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" color="#a30a0a" font-family="Helvetica" margin-left="0.25in" margin-right="0.25in" padding-left="0.1in">Note</fo:block><fo:block space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" margin-left="0.25in" margin-right="0.25in" border-left="5px solid black" padding-left="0.1in"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Databases that have been created with CouchDB 1.0.2 or earlier
        will support range requests in 1.1.0, but they are using a
        less-optimal algorithm. If you plan to make heavy use of this
        feature, make sure to compact your database with CouchDB 1.1.0
        to take advantage of a better algorithm to find byte ranges.
      </fo:block></fo:block></fo:block></fo:block><fo:block id="couchdb-release-1.1-proxying"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">HTTP Proxying</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">5. HTTP Proxying</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The HTTP proxy feature makes it easy to map and redirect different
      content through your CouchDB URL. The proxy works by mapping a
      pathname and passing all content after that prefix through to the
      configured proxy address.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Configuration of the proxy redirect is handled through the
      <fo:inline font-family="Courier" color="#026789">[httpd_global_handlers]</fo:inline> section of the CouchDB
      configuration file (typically <fo:inline font-family="Courier" color="#026789">local.ini</fo:inline>). The
      format is:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10242">[httpd_global_handlers]
PREFIX = {couch_httpd_proxy, handle_proxy_req, &lt;&lt;"DESTINATION"&gt;&gt;}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Where:
    </fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="N10246"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="N10247"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
          <fo:inline font-family="Courier" color="#026789">PREFIX</fo:inline>
        </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          Is the string that will be matched. The string can be any
          valid qualifier, although to ensure that existing database
          names are not overridden by a proxy configuration, you can use
          an underscore prefix.
        </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="N1024F"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
          <fo:inline font-family="Courier" color="#026789">DESTINATION</fo:inline>
        </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          The fully-qualified URL to which the request should be sent.
          The destination must include the <fo:inline font-family="Courier" color="#026789">http</fo:inline>
          prefix. The content is used verbatim in the original request,
          so you can also forward to servers on different ports and to
          specific paths on the target host.
        </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The proxy process then translates requests of the form:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N1025C">http://couchdb:5984/PREFIX/path</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      To:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10260">DESTINATION/path</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in" id="N10262"><fo:block font-size="10pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" color="#a30a0a" font-family="Helvetica" margin-left="0.25in" margin-right="0.25in" padding-left="0.1in">Note</fo:block><fo:block space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" margin-left="0.25in" margin-right="0.25in" border-left="5px solid black" padding-left="0.1in"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Everything after <fo:inline font-family="Courier" color="#026789">PREFIX</fo:inline> including the
        required forward slash will be appended to the
        <fo:inline font-family="Courier" color="#026789">DESTINATION</fo:inline>.
      </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The response is then communicated back to the original client.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      For example, the following configuration:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N1026F">_google = {couch_httpd_proxy, handle_proxy_req, &lt;&lt;"http://www.google.com"&gt;&gt;}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Would forward all requests for
      <fo:inline font-family="Courier" color="#026789">http://couchdb:5984/_google</fo:inline> to the Google
      website.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The service can also be used to forward to related CouchDB
      services, such as Lucene:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10278">[httpd_global_handlers]
_fti = {couch_httpd_proxy, handle_proxy_req, &lt;&lt;"http://127.0.0.1:5985"&gt;&gt;}</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in" id="N1027A"><fo:block font-size="10pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" color="#a30a0a" font-family="Helvetica" margin-left="0.25in" margin-right="0.25in" padding-left="0.1in">Note</fo:block><fo:block space-before.minimum="0em" space-before.optimum="0em" space-before.maximum="0em" margin-left="0.25in" margin-right="0.25in" border-left="5px solid black" padding-left="0.1in"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        The proxy service is basic. If the request is not identified by
        the <fo:inline font-family="Courier" color="#026789">DESTINATION</fo:inline>, or the remainder of the
        <fo:inline font-family="Courier" color="#026789">PATH</fo:inline> specification is incomplete, the
        original request URL is interpreted as if the
        <fo:inline font-family="Courier" color="#026789">PREFIX</fo:inline> component of that URL does not exist.
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        For example, requesting
        <fo:inline font-family="Courier" color="#026789">http://couchdb:5984/_intranet/media</fo:inline> when
        <fo:inline font-family="Courier" color="#026789">/media</fo:inline> on the proxy destination does not
        exist, will cause the request URL to be interpreted as
        <fo:inline font-family="Courier" color="#026789">http://couchdb:5984/media</fo:inline>. Care should be
        taken to ensure that both requested URLs and destination URLs
        are able to cope
      </fo:block></fo:block></fo:block></fo:block><fo:block id="couchdb-release-1.1-commonjs"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Added CommonJS support to map functions</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">6. Added CommonJS support to map functions</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      We didn't have CommonJS require in map functions because the
      current CommonJS implementation is scoped to the whole design doc,
      and giving views access to load code from anywhere in the design
      doc would mean we'd have to blow away your view index any time you
      changed anything. Having to rebuild views from scratch just
      because you changed some CSS or a show function isn't fun, so we
      avoided the issue by keeping CommonJS require out of map and
      reduce altogether.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The solution we came up with is to allow CommonJS inside map and
      reduce funs, but only of libraries that are stored inside the
      views part of the design doc.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      So you could continue to access CommonJS code in design_doc.foo,
      from your list functions etc, but we'd add the ability to require
      CommonJS modules within map and reduce, but only from
      design_doc.views.lib
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      There's no worry here about namespace collisions, as Couch just
      plucks <fo:inline font-family="Courier" color="#026789">views.*.map</fo:inline> and
      <fo:inline font-family="Courier" color="#026789">views.*.reduce</fo:inline> out of the design doc. So you
      could have a view called <fo:inline font-family="Courier" color="#026789">lib</fo:inline> if you wanted, and
      still have CommonJS stored in <fo:inline font-family="Courier" color="#026789">views.lib.sha1</fo:inline>
      and <fo:inline font-family="Courier" color="#026789">views.lib.stemmer</fo:inline> if you wanted.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      We simplified the implementation by enforcing that CommonJS
      modules to be used in map functions be stored in views.lib.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      A sample design doc (taken from the test suite in Futon) is below:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N102B0">{
   "views" : {
      "lib" : {
         "baz" : "exports.baz = 'bam';",
         "foo" : {
            "zoom" : "exports.zoom = 'yeah';",
            "boom" : "exports.boom = 'ok';",
            "foo" : "exports.foo = 'bar';"
         }
      },
      "commonjs" : {
         "map" : "function(doc) { emit(null, require('views/lib/foo/boom').boom)}"
      }
   },
   "_id" : "_design/test"
}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The <fo:inline font-family="Courier" color="#026789">require()</fo:inline> statement is relative to the
      design document, but anything loaded form outside of
      <fo:inline font-family="Courier" color="#026789">views/lib</fo:inline> will fail.
    </fo:block></fo:block><fo:block id="couchdb-release-1.1-etag"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">More granular ETag support for views</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">7. More granular ETag support for views</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      ETags have been assigned to a map/reduce group (the collection of
      views in a single design document). Any change to any of the
      indexes for those views would generate a new ETag for all view
      URL's in a single design doc, even if that specific view's results
      had not changed.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      In CouchDB 1.1 each <fo:inline font-family="Courier" color="#026789">_view</fo:inline> URL has it's own ETag
      which only gets updated when changes are made to the database that
      effect that index. If the index for that specific view does not
      change, that view keeps the original ETag head (therefore sending
      back 304 Not Modified more often).
    </fo:block></fo:block><fo:block id="couchdb-release-1.1-filters"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Added built-in filters for <fo:inline font-family="Courier" color="#026789">_changes</fo:inline>:
      <fo:inline font-family="Courier" color="#026789">_doc_ids</fo:inline> and <fo:inline font-family="Courier" color="#026789">_design</fo:inline>.</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">8. Added built-in filters for <fo:inline font-family="Courier" color="#026789">_changes</fo:inline>:
      <fo:inline font-family="Courier" color="#026789">_doc_ids</fo:inline> and <fo:inline font-family="Courier" color="#026789">_design</fo:inline>.</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The <fo:inline font-family="Courier" color="#026789">_changes</fo:inline> feed can now be used to watch
      changes to specific document ID's or the list of
      <fo:inline font-family="Courier" color="#026789">_design</fo:inline> documents in a database. If the
      <fo:inline font-family="Courier" color="#026789">filters</fo:inline> parameter is set to
      <fo:inline font-family="Courier" color="#026789">_doc_ids</fo:inline> a list of doc IDs can be passed in the
      "doc_ids" as a JSON array.
    </fo:block></fo:block><fo:block id="couchdb-release-1.1-wildcards"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Allow wildcards in vhosts definitions</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">9. Allow wildcards in vhosts definitions</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Similar to the rewrites section of a <fo:inline font-family="Courier" color="#026789">_design</fo:inline>
      document, the new <fo:inline font-family="Courier" color="#026789">vhosts</fo:inline> system uses variables
      in the form of :varname or wildcards in the form of asterisks. The
      variable results can be output into the resulting path as they are
      in the rewriter.
    </fo:block></fo:block><fo:block id="couchdb-release-1.1-osprocess"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">OS Daemons</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">10. OS Daemons</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      CouchDB now supports starting external processes. The support is
      simple and enables CouchDB to start each configured OS daemon. If
      the daemon stops at any point, CouchDB will restart it (with
      protection to ensure regularly failing daemons are not repeatedly
      restarted).
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The daemon starting process is one-to-one; for each each
      configured daemon in the configuration file, CouchDB will start
      exactly one instance. If you need to run multiple instances, then
      you must create separate individual configurations. Daemons are
      configured within the <fo:inline font-family="Courier" color="#026789">[os_daemons]</fo:inline> section of
      your configuration file (<fo:inline font-family="Courier" color="#026789">local.ini</fo:inline>). The
      format of each configured daemon is:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N102FA">NAME = PATH ARGS</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Where <fo:inline font-family="Courier" color="#026789">NAME</fo:inline> is an arbitrary (and unique) name to
      identify the daemon; <fo:inline font-family="Courier" color="#026789">PATH</fo:inline> is the full path to
      the daemon to be executed; <fo:inline font-family="Courier" color="#026789">ARGS</fo:inline> are any
      required arguments to the daemon.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      For example:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10309">[os_daemons]
basic_responder = /usr/local/bin/responsder.js</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      There is no interactivity between CouchDB and the running process,
      but you can use the OS Daemons service to create new HTTP servers
      and responders and then use the new proxy service to redirect
      requests and output to the CouchDB managed service. For more
      information on proxying, see
      <fo:basic-link internal-destination="couchdb-release-1.1-proxying"><fo:inline color="#0A72A3">Section 5, “HTTP Proxying”</fo:inline></fo:basic-link>. For further
      background on the OS Daemon service, see
      <fo:basic-link color="#0A72A3" external-destination="url(http://davispj.com/2010/09/26/new-couchdb-externals-api.html)">CouchDB
      Externals API</fo:basic-link>
    </fo:block></fo:block><fo:block id="coudhdb-release-1.1-updateafter"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Stale views and <fo:inline font-family="Courier" color="#026789">update_after</fo:inline></fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">11. Stale views and <fo:inline font-family="Courier" color="#026789">update_after</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Currently a view request can include the
      <fo:inline font-family="Courier" color="#026789">stale=ok</fo:inline> query argument, which allows the
      contents of a stale view index to be used to produce the view
      output. In order to trigger a build of the outdated view index, a
      second view request must be made.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      To simplify this process, the <fo:inline font-family="Courier" color="#026789">update_after</fo:inline>
      value can be supplied to the <fo:inline font-family="Courier" color="#026789">stale</fo:inline> query
      argument. This triggers a rebuild of the view index after the
      results of the view have been retrieved.
    </fo:block></fo:block><fo:block id="couchdb-release-1.1-socketoptions"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Socket Options Configuration Setting</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">12. Socket Options Configuration Setting</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The socket options for the listening socket in CouchDB can now be
      set within the CouchDB configuration file. The setting should be
      added to the <fo:inline font-family="Courier" color="#026789">[httpd]</fo:inline> section of the file using
      the option name <fo:inline font-family="Courier" color="#026789">socket_options</fo:inline>. The
      specification is as a list of tuples. For example:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10333">[httpd]
socket_options = [{recbuf, 262144}, {sndbuf, 262144}, {nodelay, true}]</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The options supported are a subset of full options supported by
      the TCP/IP stack. A list of the supported options are provided in
      the
      <fo:basic-link color="#0A72A3" external-destination="url(http://www.erlang.org/doc/man/inet.html#setopts-2)">Erlang
      inet</fo:basic-link> documentation.
    </fo:block></fo:block><fo:block id="couchdb-release-1.1-serveroptions"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Server Options Configuration Setting</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">13. Server Options Configuration Setting</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Server options for the MochiWeb component of CouchDB can now be
      added to the configuration file. Settings should be added to the
      <fo:inline font-family="Courier" color="#026789">server_options</fo:inline> option of the
      <fo:inline font-family="Courier" color="#026789">[httpd]</fo:inline> section of
      <fo:inline font-family="Courier" color="#026789">local.ini</fo:inline>. For example:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N1034A">[httpd]
server_options = [{backlog, 128}, {acceptor_pool_size, 16}]</fo:block></fo:block><fo:block id="couchdb-release-1.1-errormessages"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Improved Error Messages</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">14. Improved Error Messages</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The errors reported when CouchDB is unable to read a required file
      have been updated so that explicit information about the files and
      problem can now be identified from the error message. The errors
      report file permission access either when reading or writing to
      configuration and database files.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The error is raised both through the log file and the error
      message returned through the API call as a JSON error message. For
      example, when setting configuration values:
    </fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="no-wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="Courier" color="#ffffff" background-color="#02354d" padding="1px" font-size="7pt" keep-together.within-column="always" id="N10354">shell&gt; <fo:inline font-family="Courier" color="#026789" font-weight="bold">curl -H 'X-Couch-Persist: true' -X PUT http://couchdb:5984/_config/couchdb/delayed_commits -d '"false"'</fo:inline>
{"error":"file_permission_error","reason":"/etc/couchdb/local.ini"}</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Errors will always be reported using the
      <fo:inline font-family="Courier" color="#026789">file_permission_error</fo:inline> error type.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      During startup permissions errors on key files are also reported
      in the log with a descriptive error message and file location so
      that permissions can be fixed before restart.
    </fo:block></fo:block><fo:block id="couchdb-release-1.1-microoptimizations"><fo:block><fo:block><fo:block keep-together.within-column="always" font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0pt"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Multiple micro-optimizations when reading data.</fo:marker><fo:block font-size="16pt" font-weight="bold" color="#a30a0a">15. Multiple micro-optimizations when reading data.</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      We found a number of places where CouchDB wouldn't do the absolute
      optimal thing when reading data and got rid of quite a few
      inefficiencies. The problem with small optimizations all over the
      place is that you may not notice them with every use-case, but we
      sure hope you can see an improvement overall.
    </fo:block></fo:block></fo:flow></fo:page-sequence></fo:root>