<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Chapter&nbsp;8.&nbsp;CouchDB API Server Design Document Methods</title>
<link href="epub.css" type="text/css" rel="stylesheet" />
<meta content="DocBook XSL Stylesheets V1.76.1" name="generator" />
</head>
<body>
<div class="chapter" title="Chapter&nbsp;8.&nbsp;CouchDB API Server Design Document Methods">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a id="couchdb-api-design" />Chapter&nbsp;8.&nbsp;CouchDB API Server Design Document Methods</h1>
</div>
</div>
</div>
<p>
    In CouchDB, design documents provide the main interface for building
    a CouchDB application. The design document defines the views used to
    extract information from CouchDB through one or more views. Design
    documents are created within your CouchDB instance in the same way
    as you create database documents, but the content and definition of
    the documents is different. Design Documents are named using an ID
    defined with the design document URL path, and this URL can then be
    used to access the database contents.
  </p>
<p>
    Views and lists operate together to provide automated (and
    formatted) output from your database.
  </p>
<p>
    A list of the available methods and URL paths are provided below:
  </p>
<div class="table">
<a id="table-couchdb-api-design-summary" />
<p class="title">
<strong>Table&nbsp;8.1.&nbsp;Design Document API Calls</strong>
</p>
<div class="table-contents">
<table summary="Design Document API Calls" border="1">
<colgroup>
<col class="method" width="33%" />
<col class="path" width="33%" />
<col class="desc" width="34%" />
</colgroup>
<thead>
<tr>
<th>Method</th>
<th>Path</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code class="literal">GET</code>
</td>
<td>
<code class="literal">/db/_design/design-doc</code>
</td>
<td>
<a class="link" href="ch08.html#couchdb-api-design_db-design-designdoc_get" title="8.1.&nbsp;GET /db/_design/design-doc">
 Returns the latest revision of the design document
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">PUT</code>
</td>
<td>
<code class="literal">/db/_design/design-doc</code>
</td>
<td>
<a class="link" href="ch08s02.html" title="8.2.&nbsp;PUT /db/_design/design-doc">
 Creates or updates a design document
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">DELETE</code>
</td>
<td>
<code class="literal">/db/_design/design-doc</code>
</td>
<td>
<a class="link" href="ch08s03.html" title="8.3.&nbsp;DELETE /db/_design/design-doc">
 Deletes the design document
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">COPY</code>
</td>
<td>
<code class="literal">/db/_design/design-doc</code>
</td>
<td>
<a class="link" href="ch08s04.html" title="8.4.&nbsp;COPY /db/_design/design-doc">
 Copies the design document
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">GET</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_info</code>
</td>
<td>
<a class="link" href="ch08s08.html" title="8.8.&nbsp;GET /db/_design/design-doc/_info">
 Returns information about the design document
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">GET</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_list/list-name/other-design-doc/view-name</code>
</td>
<td>
<a class="link" href="ch08s13.html" title="8.13.&nbsp;GET /db/_design/design-doc/_list/list-name/other-design-doc/view-name">
 Invokes the list handler to translate the given view results
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">POST</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_list/list-name/other-design-doc/view-name</code>
</td>
<td>
<a class="link" href="ch08s14.html" title="8.14.&nbsp;POST /db/_design/design-doc/_list/list-name/other-design-doc/view-name">
 Invokes the list handler to translate the given view results for
 certain documents
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">GET</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_list/list-name/view-name</code>
</td>
<td>
<a class="link" href="ch08s15.html" title="8.15.&nbsp;GET /db/_design/design-doc/_list/list-name/view-name">
 Invokes the list handler to translate the given view results
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">POST</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_list/list-name/view-name</code>
</td>
<td>
<a class="link" href="ch08s16.html" title="8.16.&nbsp;POST /db/_design/design-doc/_list/list-name/view-name">
 Invokes the list handler to translate the given view results for
 certain documents
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">ALL</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_rewrite/rewrite-name/anything</code>
</td>
<td>
<a class="link" href="">
 Invokes the URL rewrite handler and processes the request after
 rewriting
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">GET</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_show/show-name</code>
</td>
<td>
<a class="link" href="ch08s11.html" title="8.11.&nbsp;POST /db/_design/design-doc/_show/show-name">
 Invokes the show handler without a document
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">GET</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_show/show-name/doc</code>
</td>
<td>
<a class="link" href="ch08s12.html" title="8.12.&nbsp;POST /db/_design/design-doc/_show/show-name/doc">
 Invokes the show handler for the given document
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">POST</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_update/update-name</code>
</td>
<td>
<a class="link" href="ch08s18.html" title="8.18.&nbsp;POST /db/_design/design-doc/_update/updatename">
 Invokes the update handler without a document ID
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">PUT</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_update/update-name/doc</code>
</td>
<td>
<a class="link" href="ch08s17.html" title="8.17.&nbsp;PUT /db/_design/design-doc/_update/updatename/doc">
 Invokes the update handler with a specific document ID
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">GET</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_view/view-name</code>
</td>
<td>
<a class="link" href="ch08s09.html" title="8.9.&nbsp;GET /db/_design/design-doc/_view/view-name">
 Returns results of the view
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">POST</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/_view/view-name</code>
</td>
<td>
<a class="link" href="ch08s10.html" title="8.10.&nbsp;POST /db/_design/design-doc/_view/view-name">
 Returns certain rows from the view
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">GET</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/attachment</code>
</td>
<td>
<a class="link" href="ch08s05.html" title="8.5.&nbsp;GET /db/_design/design-doc/attachment">
 Gets an attachment of the design document
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">PUT</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/attachment</code>
</td>
<td>
<a class="link" href="ch08s06.html" title="8.6.&nbsp;PUT /db/_design/design-doc/attachment">
 Inserts an attachment to the design document
 </a>
</td>
</tr>
<tr>
<td>
<code class="literal">DELETE</code>
</td>
<td>
<code class="literal">/db/_design/design-doc/attachment</code>
</td>
<td>
<a class="link" href="ch08s07.html" title="8.7.&nbsp;DELETE /db/_design/design-doc/attachment">
 Deletes an attachment from the design document
 </a>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" title="8.1.&nbsp;GET /db/_design/design-doc">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a id="couchdb-api-design_db-design-designdoc_get" />8.1.&nbsp;<code class="literal">GET /db/_design/design-doc</code>
</h1>
</div>
</div>
</div>
<div class="informaltable">
<table summary="URL API GET /db/_design/design-doc" border="1">
<colgroup>
<col class="field" width="33%" />
<col class="info" width="33%" />
<col class="addinfo" width="34%" />
</colgroup>
<tbody>
<tr>
<td>
<span class="bold">
<strong>Method</strong>
</span>
</td>
<td colspan="2">
<code class="literal">GET /db/_design/design-doc</code>
</td>
</tr>
<tr>
<td>
<span class="bold">
<strong>Request</strong>
</span>
</td>
<td colspan="2">
 None
 </td>
</tr>
<tr>
<td>
<span class="bold">
<strong>Response</strong>
</span>
</td>
<td colspan="2">
 JSON of the existing design document
 </td>
</tr>
<tr>
<td>
<span class="bold">
<strong>Admin Privileges Required</strong>
</span>
</td>
<td colspan="2">no</td>
</tr>
<tr>
<td>
<span class="bold">
<strong>Query Arguments</strong>
</span>
</td>
<td>
<span class="bold">
<strong>Argument</strong>
</span>
</td>
<td>
<code class="literal">rev</code>
</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Description</strong>
</span>
</td>
<td>
 Specify the revision to return
 </td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Optional</strong>
</span>
</td>
<td>yes</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Type</strong>
</span>
</td>
<td>string</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Argument</strong>
</span>
</td>
<td>
<code class="literal">revs</code>
</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Description</strong>
</span>
</td>
<td>
 Return a list of the revisions for the document
 </td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Optional</strong>
</span>
</td>
<td>yes</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Type</strong>
</span>
</td>
<td>boolean</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Supported Values</strong>
</span>
</td>
<td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<code class="literal">true</code>
</td>
<td>Includes the revisions</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Argument</strong>
</span>
</td>
<td>
<code class="literal">revs_info</code>
</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Description</strong>
</span>
</td>
<td>
 Return a list of detailed revision information for the
 document
 </td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Optional</strong>
</span>
</td>
<td>yes</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Type</strong>
</span>
</td>
<td>boolean</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<span class="bold">
<strong>Supported Values</strong>
</span>
</td>
<td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<code class="literal">true</code>
</td>
<td>Includes the revisions</td>
</tr>
</tbody>
</table>
</div>
<p>
      Returns the specified design document,
      <code class="literal">design-doc</code> from the specified
      <code class="literal">db</code>. For example, to retrieve the design
      document <code class="literal">recipes</code> you would send the following
      request:
    </p>
<pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes
Content-Type: application/json</pre>
<p>
      The returned string will be the JSON of the design document:
    </p>
<pre class="programlisting">{
   "_id" : "_design/recipes",
   "_rev" : "5-39f56a392b86bbee57e2138921346406"
   "language" : "javascript",
   "views" : {
      "by_recipe" : {
         "map" : "function(doc) { if (doc.title != null) emit(doc.title, doc) }"
      },
   },
}</pre>
<p>
      A list of the revisions can be obtained by using the
      <code class="literal">revs</code> query argument, or an extended list of
      revisions using the <code class="literal">revs_info</code> query argument.
      This operates in the same way as for other documents. Fur further
      examples, see
      <a class="xref" href="ch06s02.html" title="6.2.&nbsp;GET /db/doc">Section&nbsp;6.2, &ldquo;<code class="literal">GET /db/doc</code>&rdquo;</a>.
    </p>
</div>
</div>
</body>
</html>
